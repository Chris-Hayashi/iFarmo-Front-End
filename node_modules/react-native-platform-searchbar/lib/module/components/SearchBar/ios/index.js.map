{"version":3,"sources":["index.tsx"],"names":["React","useRef","useState","forwardRef","useImperativeHandle","LayoutAnimation","StyleSheet","TextInput","useWindowDimensions","View","iosBlue","iosDarkPlaceholderGray","iosLightPlaceholderGray","SearchIcon","CancelButton","ClearButton","SearchBar","ref","value","theme","cancelText","cancelTextStyle","cancelAccessibilityLabel","clearAccessibilityLabel","returnKeyType","selectionColor","placeholderTextColor","iconColor","leftIcon","style","inputStyle","children","onFocus","onChangeText","onCancel","onClear","props","fontScale","styles","defaultStyles","darkStyles","cancelButtonVisible","setCancelButtonVisible","inputRef","current","handleFocus","e","configureNext","Presets","easeInEaseOut","duration","handleClear","handleCancel","blur","wrapper","inputWrapper","input","paddingHorizontal","clearButton","undefined","cancelButton","create","flexDirection","alignItems","flex","backgroundColor","borderRadius","paddingVertical","position","width","height","marginLeft","aspectRatio","marginRight","color"],"mappings":"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","sourcesContent":["import React, {\n    useRef,\n    useState,\n    forwardRef,\n    useImperativeHandle,\n} from 'react';\nimport {\n    LayoutAnimation,\n    NativeSyntheticEvent,\n    StyleSheet,\n    TextInput,\n    TextInputFocusEventData,\n    useWindowDimensions,\n    View,\n} from 'react-native';\n\nimport {\n    iosBlue,\n    iosDarkPlaceholderGray,\n    iosLightPlaceholderGray,\n} from '../../../constants/colors';\nimport SearchIcon from '../../icons/SearchIcon';\nimport CancelButton from './CancelButton';\nimport ClearButton from './ClearButton';\n\nimport type { SearchBarProps } from '../../../types';\n\nconst SearchBar = forwardRef<TextInput | null, SearchBarProps>(\n    (\n        {\n            value,\n            theme = 'light',\n            cancelText = 'Cancel',\n            cancelTextStyle,\n            cancelAccessibilityLabel,\n            clearAccessibilityLabel,\n            returnKeyType = 'search',\n            selectionColor = iosBlue,\n            placeholderTextColor = theme === 'light'\n                ? iosLightPlaceholderGray\n                : iosDarkPlaceholderGray,\n            iconColor = placeholderTextColor,\n            leftIcon,\n            style,\n            inputStyle,\n            children,\n            onFocus,\n            onChangeText,\n            onCancel,\n            onClear,\n            ...props\n        },\n        ref\n    ) => {\n        const { fontScale } = useWindowDimensions();\n\n        const styles = theme === 'light' ? defaultStyles : darkStyles;\n        const [cancelButtonVisible, setCancelButtonVisible] = useState(false);\n        const inputRef = useRef<TextInput>(null);\n        useImperativeHandle(ref, () => inputRef.current!);\n\n        const handleFocus = (\n            e: NativeSyntheticEvent<TextInputFocusEventData>\n        ) => {\n            LayoutAnimation.configureNext({\n                ...LayoutAnimation.Presets.easeInEaseOut,\n                duration: 300,\n            });\n            setCancelButtonVisible(true);\n            if (onFocus) {\n                onFocus(e);\n            }\n        };\n\n        const handleClear = () => {\n            if (onClear) {\n                onClear();\n            }\n            // somehow using inputRef.current.clear() doesn't work\n            onChangeText('');\n        };\n\n        const handleCancel = () => {\n            if (onCancel) {\n                onCancel();\n            }\n            if (inputRef.current) {\n                handleClear();\n                inputRef.current.blur();\n            }\n            LayoutAnimation.configureNext({\n                ...LayoutAnimation.Presets.easeInEaseOut,\n                duration: 300,\n            });\n            setCancelButtonVisible(false);\n        };\n\n        return (\n            <View style={[styles.wrapper, style]}>\n                <View style={styles.inputWrapper}>\n                    <TextInput\n                        ref={inputRef}\n                        value={value}\n                        clearButtonMode=\"never\"\n                        autoCorrect={false}\n                        onChangeText={onChangeText}\n                        onFocus={handleFocus}\n                        returnKeyType={returnKeyType}\n                        placeholderTextColor={placeholderTextColor}\n                        selectionColor={selectionColor}\n                        accessibilityRole=\"search\"\n                        accessibilityTraits=\"search\"\n                        {...props}\n                        style={[\n                            styles.input,\n                            { paddingHorizontal: 25 + 10 * fontScale },\n                            inputStyle,\n                        ]}\n                    />\n                    <View pointerEvents=\"box-none\" style={styles.children}>\n                        {leftIcon ? (\n                            <View style={styles.leftIcon}>{leftIcon}</View>\n                        ) : (\n                            <SearchIcon\n                                color={iconColor}\n                                style={styles.leftIcon}\n                            />\n                        )}\n                        {children}\n                        {value ? (\n                            <ClearButton\n                                color={iconColor}\n                                onPress={handleClear}\n                                accessibilityLabel={clearAccessibilityLabel}\n                                style={styles.clearButton}\n                            />\n                        ) : undefined}\n                    </View>\n                </View>\n                <CancelButton\n                    text={cancelText}\n                    visible={cancelButtonVisible}\n                    onPress={handleCancel}\n                    style={styles.cancelButton}\n                    textStyle={cancelTextStyle}\n                    accessibilityLabel={cancelAccessibilityLabel}\n                />\n            </View>\n        );\n    }\n);\n\nconst defaultStyles = StyleSheet.create({\n    wrapper: {\n        flexDirection: 'row',\n        alignItems: 'center',\n    },\n    inputWrapper: {\n        flex: 1,\n    },\n    input: {\n        backgroundColor: '#E3E3E9',\n        borderRadius: 12,\n        paddingVertical: 10,\n    },\n    children: {\n        position: 'absolute',\n        flexDirection: 'row',\n        width: '100%',\n        height: '100%',\n        alignItems: 'center',\n    },\n    cancelButton: {\n        marginLeft: 10,\n    },\n    clearButton: {\n        height: '40%',\n        aspectRatio: 1,\n        marginRight: 10,\n    },\n    leftIcon: {\n        marginLeft: 10,\n        marginRight: 'auto',\n        height: '50%',\n        aspectRatio: 1,\n    },\n});\n\nconst darkStyles = StyleSheet.create({\n    ...defaultStyles,\n    input: {\n        ...defaultStyles.input,\n        backgroundColor: '#1c1c1f',\n        color: '#FFF',\n    },\n});\n\nexport default SearchBar;\n"]}